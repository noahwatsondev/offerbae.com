<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <meta name="description" content="<%= description %>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <% const getNum=(v)=> {
        if (v === undefined || v === null || v === '') return 0;
        if (typeof v === 'number') return v;
        const num = parseFloat(String(v).replace(/[^0-9.]/g, ''));
        return isNaN(num) ? 0 : num;
        };

        const formatPrice = (v) => {
        const num = getNum(v);
        if (num <= 0) return '--' ; return num.toLocaleString(undefined, { minimumFractionDigits: 2,
            maximumFractionDigits: 2 }); }; const checkIsSale=(price, salePrice)=> {
            const p = getNum(price);
            const s = getNum(salePrice);
            return s > 0 && p > s;
            };
            %>

            <style>
                :root {
                    --primary: #FFD15C;
                    --primary-light: #FFF9E6;
                    --text-main: #111827;
                    --text-secondary: #4B5563;
                    --bg-body: #F9FAFB;
                    --card-bg: #FFFFFF;
                    --border: #E5E7EB;
                    --danger: #EF4444;
                    --success: #10B981;
                }

                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }

                body {
                    font-family: 'Outfit', sans-serif;
                    background: var(--bg-body);
                    color: var(--text-main);
                    line-height: 1.6;
                }

                header {
                    background: var(--card-bg);
                    border-bottom: 1px solid var(--border);
                    position: sticky;
                    top: 0;
                    z-index: 1000;
                    padding: 0.75rem 0;
                    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                    min-height: 70px;
                    display: flex;
                    align-items: center;
                }

                .header-container {
                    max-width: 1200px;
                    margin: 0 auto;
                    padding: 0 2rem;
                    width: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                }

                .container {
                    max-width: 1200px;
                    margin: 2rem auto;
                    padding: 0 2rem;
                }

                .product-layout {
                    display: grid;
                    grid-template-columns: 1.2fr 1fr;
                    gap: 4rem;
                    background: #fff;
                    padding: 3rem;
                    border-radius: 1.5rem;
                    border: 1px solid var(--border);
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.03);
                }

                @media (max-width: 1024px) {
                    .product-layout {
                        grid-template-columns: 1fr;
                        gap: 2rem;
                        padding: 1.5rem;
                    }

                    .container {
                        padding: 0 1rem;
                        margin: 1rem auto;
                    }
                }

                .image-gallery {
                    position: sticky;
                    top: 100px;
                }

                .main-image-container {
                    background: #fff;
                    border-radius: 1rem;
                    padding: 2rem;
                    border: 1px solid var(--border);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    position: relative;
                }

                .main-image {
                    max-width: 100%;
                    max-height: 500px;
                    object-fit: contain;
                }

                .sale-badge {
                    position: absolute;
                    top: 1.5rem;
                    left: 1.5rem;
                    background: var(--danger);
                    color: #fff;
                    padding: 0.5rem 1rem;
                    border-radius: 2rem;
                    font-weight: 700;
                    font-size: 0.875rem;
                    box-shadow: 0 10px 20px rgba(239, 68, 68, 0.2);
                    z-index: 10;
                }

                .brand-name {
                    color: var(--primary);
                    font-weight: 700;
                    text-transform: uppercase;
                    letter-spacing: 2px;
                    font-size: 0.875rem;
                    margin-bottom: 1rem;
                    display: block;
                }

                .product-title {
                    font-size: 2.5rem;
                    font-weight: 800;
                    line-height: 1.2;
                    margin-bottom: 1.5rem;
                    letter-spacing: -1px;
                }

                .price-container {
                    margin-bottom: 2rem;
                    padding-bottom: 2rem;
                    border-bottom: 1px solid var(--border);
                }

                .current-price {
                    font-size: 3rem;
                    font-weight: 800;
                    color: var(--text-main);
                }

                .sale-price {
                    color: var(--danger);
                }

                .original-price {
                    font-size: 1.5rem;
                    color: #9ca3af;
                    text-decoration: line-through;
                    margin-left: 1rem;
                }

                .savings-badge {
                    display: inline-block;
                    background: var(--success);
                    color: #fff;
                    padding: 0.25rem 0.75rem;
                    border-radius: 0.5rem;
                    font-weight: 700;
                    font-size: 0.875rem;
                    margin-top: 0.5rem;
                }

                .buy-now-btn {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 0.75rem;
                    width: 100%;
                    padding: 1.25rem;
                    border-radius: 1rem;
                    background: var(--primary);
                    color: #1a1a1a;
                    text-decoration: none;
                    font-size: 1.125rem;
                    font-weight: 700;
                    box-shadow: 0 10px 20px rgba(255, 209, 92, 0.2);
                    transition: all 0.2s;
                }

                .buy-now-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 15px 30px rgba(255, 209, 92, 0.3);
                }
            </style>
</head>

<body>
    <header
        style="<%= (typeof settings !== 'undefined' && settings.headerStyles) ? settings.headerStyles.replace(/\/\*[\s\S]*?\*\//g, '') : '' %>">
        <div class="header-container">
            <div style="display: flex; align-items: center; gap: 1rem; cursor: pointer;" onclick="location.href='/'">
                <% if (typeof settings !=='undefined' && settings.logoUrl) { %>
                    <img src="<%= settings.logoUrl %>" alt="Logo"
                        style="height: 40px; width: auto; max-width: 200px; object-fit: contain; display: block;">
                    <% } %>
                        <h1
                            style="margin: 0; font-size: 1.25rem; font-weight: 700; letter-spacing: -0.025em; <%= (typeof settings !== 'undefined' && settings.logoStyles) ? settings.logoStyles : '' %>">
                            <%= (typeof settings !=='undefined' && settings.logoText) ? settings.logoText : 'OfferBae'
                                %>
                        </h1>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="product-layout">
            <div class="image-gallery">
                <div class="main-image-container">
                    <% const isSale=checkIsSale(product.price, product.salePrice); const pVal=getNum(product.price);
                        const sVal=getNum(product.salePrice); %>
                        <% if (isSale) { %>
                            <div class="sale-badge">SALE</div>
                            <% } %>
                                <img src="<%= product.storageImageUrl || product.imageUrl || '/placeholder.png' %>"
                                    alt="<%= product.name %>" class="main-image">
                </div>
            </div>

            <div class="product-content">
                <span class="brand-name">
                    <% if (brand && brand.affiliateHomeUrl) { %>
                        <a href="<%= brand.affiliateHomeUrl %>" target="_blank" rel="noopener noreferrer"
                            style="color: var(--primary); text-decoration: none; font-weight: 700;">
                            <%= brand.name %>
                        </a>
                        <% } else { %>
                            <%= brand ? brand.name : product.advertiserName %>
                                <% } %>
                </span>
                <h1 class="product-title">
                    <%= product.name %>
                </h1>

                <div class="price-container">
                    <div style="display: flex; align-items: baseline;">
                        <% if (isSale) { %>
                            <span class="current-price sale-price">$<%= formatPrice(sVal) %></span>
                            <span class="original-price">$<%= formatPrice(pVal) %></span>
                            <% } else { %>
                                <span class="current-price">$<%= formatPrice(pVal) %></span>
                                <% } %>
                    </div>
                    <% if (isSale) { %>
                        <div class="savings-badge">
                            Save $<%= formatPrice(pVal - sVal) %> (<%= Math.round((1 - sVal/pVal) * 100) %>%)
                        </div>
                        <% } %>
                </div>

                <div class="product-description">
                    <h3 style="margin-bottom: 1rem;">Product Details</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        <%= product.description || 'No detailed description available for this item.' %>
                    </p>
                </div>

                <div style="margin-top: 2rem;">
                    <a href="<%= product.buyUrl || product.link %>" target="_blank" class="buy-now-btn">
                        <svg width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        More Details
                    </a>
                </div>
            </div>
        </div>
    </div>

    <footer
        style="margin-top: 4rem; padding: 4rem 2rem; border-top: 1px solid var(--border); background: #fff; text-align: center;">
        <p style="color: var(--text-secondary); font-size: 0.875rem;">&copy; 2026 Offerbae. Premium Fashion & Lifestyle
            Deals.</p>
    </footer>
</body>

</html>