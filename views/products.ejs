<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OfferBae Shop</title>
    <link rel="stylesheet" href="/css/main.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>OfferBae</h1>
            <nav>
                <a href="/">Dashboard</a>
                <a href="/shop">Shop</a>
            </nav>
        </header>

        <div class="product-grid">
            <% products.forEach(product=> { %>
                <div class="product-card">
                    <img src="<%= product.storageImageUrl || product.imageUrl || 'https://via.placeholder.com/300' %>"
                        alt="<%= product.name %>" class="product-image" loading="lazy">
                    <div class="product-content">
                        <div class="product-category">
                            <%= product.network %>
                        </div>
                        <h2 class="product-title" title="<%= product.name %>">
                            <%= product.name %>
                        </h2>
                        <div class="product-price">
                            <%= product.currency %>
                                <%= product.price %>
                                    <% if (product.salePrice) { %>
                                        <span class="old-price">
                                            <%= product.salePrice %>
                                        </span>
                                        <% } %>
                        </div>
                        <a href="<%= product.link %>" target="_blank" rel="noopener noreferrer"
                            class="btn btn-primary">View Offer</a>
                    </div>
                </div>
                <% }); %>
        </div>

        <div class="pagination">
            <% if (page> 1) { %>
                <a
                    href="/shop?page=<%= page - 1 %><%= advertiserId ? '&advertiser=' + advertiserId : '' %>">Previous</a>
                <% } %>
                    <span>Page <%= page %></span>
                    <% if (hasNextPage) { %>
                        <a
                            href="/shop?page=<%= page + 1 %><%= advertiserId ? '&advertiser=' + advertiserId : '' %>">Next</a>
                        <% } %>
        </div>
    </div>
</body>

</html>